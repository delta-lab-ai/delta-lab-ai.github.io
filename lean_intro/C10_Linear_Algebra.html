

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10. Linear algebra &mdash; Mathematics in Lean v4.19.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=92fd9be5" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=7048e04d"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="11. Topology" href="C11_Topology.html" />
    <link rel="prev" title="9. Groups and Rings" href="C09_Groups_and_Rings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. Logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. Sets and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. Elementary Number Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="C06_Discrete_Mathematics.html">6. Discrete Mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Structures.html">7. Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Hierarchies.html">8. Hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Groups_and_Rings.html">9. Groups and Rings</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">10. Linear algebra</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vector-spaces-and-linear-maps">10.1. Vector spaces and linear maps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vector-spaces">10.1.1. Vector spaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linear-maps">10.1.2. Linear maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sums-and-products-of-vector-spaces">10.1.3. Sums and products of vector spaces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#subspaces">10.2. Subspaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subspace-spanned-by-a-set">10.2.1. Subspace spanned by a set</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#endomorphisms">10.3. Endomorphisms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matrices-bases-and-dimension">10.4. Matrices, bases and dimension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#matrices">10.4.1. Matrices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bases">10.4.2. Bases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dimension">10.4.3. Dimension</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C11_Topology.html">11. Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Differential_Calculus.html">12. Differential Calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="C13_Integration_and_Measure_Theory.html">13. Integration and Measure Theory</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">10. </span>Linear algebra</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C10_Linear_Algebra.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="linear-algebra">
<span id="id1"></span><h1><span class="section-number">10. </span>Linear algebra<a class="headerlink" href="#linear-algebra" title="Link to this heading">&#61633;</a></h1>
<section id="vector-spaces-and-linear-maps">
<h2><span class="section-number">10.1. </span>Vector spaces and linear maps<a class="headerlink" href="#vector-spaces-and-linear-maps" title="Link to this heading">&#61633;</a></h2>
<section id="vector-spaces">
<h3><span class="section-number">10.1.1. </span>Vector spaces<a class="headerlink" href="#vector-spaces" title="Link to this heading">&#61633;</a></h3>
<span class="target" id="index-0"></span><p>&#8220;let <span class="math notranslate nohighlight">\(K\)</span> be a field and let <span class="math notranslate nohighlight">\(V\)</span> be a vector space over <span class="math notranslate nohighlight">\(K\)</span>&#8221;:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="c1">-- ``AddCommGroup`` only support multiplication with &#8469; or &#8484;</span>
<span class="c1">-- ``Field K`` provides scalar multiplication</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">Field</span> <span class="n">K</span><span class="o">]</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">AddCommGroup</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">Module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>
</pre></div>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8226;</span> <span class="o">(</span><span class="n">u</span> <span class="bp">+</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">u</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">v</span> <span class="o">:=</span>
  <span class="n">smul_add</span> <span class="n">a</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">&#8226;</span> <span class="n">u</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">u</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">&#8226;</span> <span class="n">u</span> <span class="o">:=</span>
  <span class="n">add_smul</span> <span class="n">a</span> <span class="n">b</span> <span class="n">u</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">b</span> <span class="bp">&#8226;</span> <span class="n">u</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">&#8226;</span> <span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">u</span> <span class="o">:=</span>
  <span class="n">smul_comm</span> <span class="n">a</span> <span class="n">b</span> <span class="n">u</span>
</pre></div>
</div>
</section>
<section id="linear-maps">
<h3><span class="section-number">10.1.2. </span>Linear maps<a class="headerlink" href="#linear-maps" title="Link to this heading">&#61633;</a></h3>
<span class="target" id="index-1"></span><p>Structure <code class="docutils literal notranslate"><span class="pre">LinearMap</span></code> between two <code class="docutils literal notranslate"><span class="pre">K</span></code>-vector spaces <code class="docutils literal notranslate"><span class="pre">V</span></code> and <code class="docutils literal notranslate"><span class="pre">W</span></code> is denoted by <code class="docutils literal notranslate"><span class="pre">V</span> <span class="pre">&#8594;&#8343;[K]</span> <span class="pre">W</span></code>. The subscript <cite>l</cite> stands for linear.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">W</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">AddCommGroup</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">Module</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">&#966;</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="n">&#966;</span> <span class="o">(</span><span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">&#966;</span> <span class="n">v</span> <span class="o">:=</span>
  <span class="n">map_smul</span> <span class="n">&#966;</span> <span class="n">a</span> <span class="n">v</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="n">&#966;</span> <span class="o">(</span><span class="n">v</span> <span class="bp">+</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">&#966;</span> <span class="n">v</span> <span class="bp">+</span> <span class="n">&#966;</span> <span class="n">w</span> <span class="o">:=</span>
  <span class="n">map_add</span> <span class="n">&#966;</span> <span class="n">v</span> <span class="n">w</span>
</pre></div>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">(</span><span class="n">&#968;</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>

<span class="k">#check</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">&#8226;</span> <span class="n">&#966;</span> <span class="bp">+</span> <span class="n">&#968;</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
</pre></div>
</div>
<p>We need to use <code class="docutils literal notranslate"><span class="pre">LinearMap.comp</span></code> or the notation <code class="docutils literal notranslate"><span class="pre">&#8728;&#8343;</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">(</span><span class="n">&#952;</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">V</span><span class="o">)</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">&#966;.comp</span> <span class="n">&#952;</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">&#966;</span> <span class="bp">&#8728;&#8343;</span> <span class="n">&#952;</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
</pre></div>
</div>
<p>Construct linear maps:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">V</span> <span class="n">where</span>
  <span class="n">toFun</span> <span class="n">v</span> <span class="o">:=</span> <span class="mi">3</span> <span class="bp">&#8226;</span> <span class="n">v</span>
  <span class="n">map_add&#39;</span> <span class="n">_</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">smul_add</span> <span class="bp">..</span>
  <span class="n">map_smul&#39;</span> <span class="n">_</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">smul_comm</span> <span class="bp">..</span>
</pre></div>
</div>
</section>
<section id="sums-and-products-of-vector-spaces">
<h3><span class="section-number">10.1.3. </span>Sums and products of vector spaces<a class="headerlink" href="#sums-and-products-of-vector-spaces" title="Link to this heading">&#61633;</a></h3>
<p>We can build new vector spaces out of old ones using direct sums and direct products.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span> <span class="n">binary_product</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">W</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">AddCommGroup</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">Module</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">AddCommGroup</span> <span class="n">U</span><span class="o">]</span> <span class="o">[</span><span class="n">Module</span> <span class="n">K</span> <span class="n">U</span><span class="o">]</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">T</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">AddCommGroup</span> <span class="n">T</span><span class="o">]</span> <span class="o">[</span><span class="n">Module</span> <span class="n">K</span> <span class="n">T</span><span class="o">]</span>

<span class="c1">-- First projection map</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">&#215;</span> <span class="n">W</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">V</span> <span class="o">:=</span> <span class="n">LinearMap.fst</span> <span class="n">K</span> <span class="n">V</span> <span class="n">W</span>

<span class="c1">-- Second projection map</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">&#215;</span> <span class="n">W</span> <span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span> <span class="o">:=</span> <span class="n">LinearMap.snd</span> <span class="n">K</span> <span class="n">V</span> <span class="n">W</span>
</pre></div>
</div>
</section>
</section>
<section id="subspaces">
<span id="index-2"></span><h2><span class="section-number">10.2. </span>Subspaces<a class="headerlink" href="#subspaces" title="Link to this heading">&#61633;</a></h2>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">Field</span> <span class="n">K</span><span class="o">]</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">AddCommGroup</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">Module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">Submodule</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">V</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&#8712;</span> <span class="n">U</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">&#8712;</span> <span class="n">U</span> <span class="o">:=</span>
  <span class="n">U.add_mem</span> <span class="n">hx</span> <span class="n">hy</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">Submodule</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">a</span> <span class="bp">&#8226;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">U</span> <span class="o">:=</span>
  <span class="n">U.smul_mem</span> <span class="n">a</span> <span class="n">hx</span>
</pre></div>
</div>
<section id="subspace-spanned-by-a-set">
<h3><span class="section-number">10.2.1. </span>Subspace spanned by a set<a class="headerlink" href="#subspace-spanned-by-a-set" title="Link to this heading">&#61633;</a></h3>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">Set</span> <span class="n">V</span><span class="o">}</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Submodule</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="n">Submodule.span</span> <span class="n">K</span> <span class="n">s</span> <span class="bp">&#8804;</span> <span class="n">E</span> <span class="bp">&#8596;</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">E</span> <span class="o">:=</span>
  <span class="n">Submodule.span_le</span>
</pre></div>
</div>
</section>
</section>
<section id="endomorphisms">
<h2><span class="section-number">10.3. </span>Endomorphisms<a class="headerlink" href="#endomorphisms" title="Link to this heading">&#61633;</a></h2>
</section>
<section id="matrices-bases-and-dimension">
<span id="matrices-bases-dimension"></span><h2><span class="section-number">10.4. </span>Matrices, bases and dimension<a class="headerlink" href="#matrices-bases-and-dimension" title="Link to this heading">&#61633;</a></h2>
<section id="matrices">
<span id="id2"></span><h3><span class="section-number">10.4.1. </span>Matrices<a class="headerlink" href="#matrices" title="Link to this heading">&#61633;</a></h3>
<span class="target" id="index-3"></span><ul class="simple">
<li><p>For concrete vectors: <code class="docutils literal notranslate"><span class="pre">![&#8230;]</span></code>, where components are separated by commas.</p></li>
<li><p>For concrete matrices: <code class="docutils literal notranslate"><span class="pre">!![&#8230;]</span></code>, rows are separated by &#8220;;&#8221;</p>
<ul>
<li><p>When entries have a computable type such as <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> or <code class="docutils literal notranslate"><span class="pre">&#8474;</span></code>, we can use the <code class="docutils literal notranslate"><span class="pre">eval</span></code> command to play with basic operations.</p></li>
</ul>
</li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span> <span class="n">matrices</span>

<span class="c1">-- Adding vectors</span>
<span class="k">#eval</span> <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">]</span> <span class="bp">+</span> <span class="bp">!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>  <span class="c1">-- ![4, 6]</span>

<span class="c1">-- Adding matrices</span>
<span class="k">#eval</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span> <span class="bp">+</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="bp">;</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">]</span>  <span class="c1">-- !![4, 6; 8, 10]</span>

<span class="c1">-- Multiplying matrices</span>
<span class="k">#eval</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span> <span class="bp">*</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="bp">;</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">]</span>  <span class="c1">-- !![13, 16; 29, 36]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Vector is neither a row vector nor a column vector: <code class="docutils literal notranslate"><span class="pre">Matrix.vecMul</span></code>: Multiplication of a matrix with</p>
<ul>
<li><p>a vector from the left <code class="docutils literal notranslate"><span class="pre">&#7525;*</span></code>: interprets as a row vector</p></li>
<li><p>a vector from the right <code class="docutils literal notranslate"><span class="pre">*&#7525;</span></code>: interprets as a column vector</p></li>
</ul>
</li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">Matrix</span>

<span class="c1">-- matrices acting on vectors on the left</span>
<span class="k">#eval</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span> <span class="bp">*&#7525;</span> <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span> <span class="c1">-- ![3, 7]</span>

<span class="c1">-- matrices acting on vectors on the left, resulting in a size one matrix</span>
<span class="k">#eval</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">]</span> <span class="bp">*&#7525;</span> <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>  <span class="c1">-- ![3]</span>

<span class="c1">-- matrices acting on vectors on the right</span>
<span class="k">#eval</span>  <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span> <span class="bp">&#7525;*</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="bp">;</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">]</span> <span class="c1">-- ![9, 12]</span>
</pre></div>
</div>
<p>Other familiar operations include the vector dot product, matrix transpose, and,
for square matrices, determinant and trace.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="c1">-- vector dot product</span>
<span class="k">#eval</span> <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">]</span> <span class="bp">&#11037;&#7525;</span> <span class="bp">!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span> <span class="c1">-- `11`</span>

<span class="c1">-- matrix transpose</span>
<span class="k">#eval</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span><span class="bp">&#7488;</span> <span class="c1">-- `!![1, 3; 2, 4]`</span>

<span class="c1">-- determinant</span>
<span class="k">#eval</span> <span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">),</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span> <span class="c1">-- `-2`</span>

<span class="c1">-- trace</span>
<span class="k">#eval</span> <span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">),</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">trace</span> <span class="c1">-- `5`</span>
</pre></div>
</div>
<p>Different from <strong>computable</strong> types like <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code>,
when entries are of <strong>noncomputable</strong> type, e.g. <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code>, we cannot use <code class="docutils literal notranslate"><span class="pre">#eval</span></code>!</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">simp</span></code> and <code class="docutils literal notranslate"><span class="pre">norm_num</span></code> tactics in proofs, or their command counter-part for quick exploration.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="bp">#</span><span class="n">simp</span> <span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">),</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span> <span class="c1">-- `4 - 2*3`</span>

<span class="k">#check</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span>
<span class="k">#eval</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span>

<span class="bp">#</span><span class="n">norm_num</span> <span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">),</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span> <span class="c1">-- `-2`</span>

<span class="bp">#</span><span class="n">norm_num</span> <span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">),</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">trace</span> <span class="c1">-- `5`</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="k">in</span>
<span class="bp">#</span><span class="n">simp</span> <span class="bp">!!</span><span class="o">[</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="bp">;</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span> <span class="c1">-- `a * d &#8211; b * c`</span>
</pre></div>
</div>
<p>Inversion <code class="docutils literal notranslate"><span class="pre">A&#8315;&#185;</span></code> (only for invertible matrices):</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="bp">#</span><span class="n">norm_num</span> <span class="o">[</span><span class="n">Matrix.inv_def</span><span class="o">]</span> <span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">),</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span><span class="bp">&#8315;&#185;</span> <span class="c1">-- !![-2, 1; 3 / 2, -(1 / 2)]</span>
</pre></div>
</div>
</section>
<section id="bases">
<h3><span class="section-number">10.4.2. </span>Bases<a class="headerlink" href="#bases" title="Link to this heading">&#61633;</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Basis</span> <span class="pre">&#953;</span> <span class="pre">K</span> <span class="pre">V</span></code>: Bases indexed by a type <code class="docutils literal notranslate"><span class="pre">&#953;</span></code> of vector space <code class="docutils literal notranslate"><span class="pre">K</span> <span class="pre">V</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&#953;</span></code> is the set of possible indices, an element <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">:</span> <span class="pre">&#953;</span></code> is an index chosen from that set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#953;</span> <span class="pre">&#8594;&#8320;</span> <span class="pre">K</span></code>: functions from <code class="docutils literal notranslate"><span class="pre">&#953;</span></code> to <code class="docutils literal notranslate"><span class="pre">K</span></code> with finite support; <code class="docutils literal notranslate"><span class="pre">&#8320;</span></code> indicates finite support</p></li>
</ul>
</li>
</ul>
<p>The isomorphism is called <code class="docutils literal notranslate"><span class="pre">Basis.repr</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">Field</span> <span class="n">K</span><span class="o">]</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">AddCommGroup</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">Module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>

<span class="kn">section</span>

<span class="kn">open</span> <span class="n">Module</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">&#953;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">Basis</span> <span class="n">&#953;</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">&#953;</span><span class="o">)</span>

<span class="c1">-- The basis vector with index ``i``</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">B</span> <span class="n">i</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span>

<span class="c1">-- the component function of ``v``</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">B.repr</span> <span class="n">v</span> <span class="o">:</span> <span class="n">&#953;</span> <span class="bp">&#8594;&#8320;</span> <span class="n">K</span><span class="o">)</span>

<span class="c1">-- the component of ``v`` with index ``i``</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">B.repr</span> <span class="n">v</span> <span class="n">i</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span>
</pre></div>
</div>
<p>We can express any vector as a linear combination of basis vectors.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">[</span><span class="n">Fintype</span> <span class="n">&#953;</span><span class="o">]</span> <span class="o">:</span> <span class="bp">&#8721;</span> <span class="n">i</span> <span class="o">:</span> <span class="n">&#953;</span><span class="o">,</span> <span class="n">B.repr</span> <span class="n">v</span> <span class="n">i</span> <span class="bp">&#8226;</span> <span class="o">(</span><span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">v</span> <span class="o">:=</span>
  <span class="n">B.sum_repr</span> <span class="n">v</span>
</pre></div>
</div>
</section>
<section id="dimension">
<h3><span class="section-number">10.4.3. </span>Dimension<a class="headerlink" href="#dimension" title="Link to this heading">&#61633;</a></h3>
<p>Bases are also useful to define the concept of dimension.</p>
<p><code class="docutils literal notranslate"><span class="pre">Module.finrank</span></code>: get the dimension (&#8469;) of finite-dimensional vector spaces.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">Module.finrank</span> <span class="n">K</span> <span class="n">V</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>

<span class="c1">-- `Fin n &#8594; K` is the archetypical space with dimension `n` over `K`.</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">Module.finrank</span> <span class="n">K</span> <span class="o">(</span><span class="n">Fin</span> <span class="n">n</span> <span class="bp">&#8594;</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
  <span class="n">Module.finrank_fin_fun</span> <span class="n">K</span>

<span class="c1">-- Seen as a vector space over itself, `&#8450;` has dimension one.</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">Module.finrank</span> <span class="n">&#8450;</span> <span class="n">&#8450;</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
  <span class="n">Module.finrank_self</span> <span class="n">&#8450;</span>

<span class="c1">-- But as a real vector space it has dimension two.</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">Module.finrank</span> <span class="n">&#8477;</span> <span class="n">&#8450;</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
  <span class="n">Complex.finrank_real_complex</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C09_Groups_and_Rings.html" class="btn btn-neutral float-left" title="9. Groups and Rings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C11_Topology.html" class="btn btn-neutral float-right" title="11. Topology" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2025, Jeremy Avigad, Patrick Massot. Modified, simplified, and annotated by Wuyang Chen. Text licensed under CC BY 4.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>