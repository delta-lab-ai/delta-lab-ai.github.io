

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Logic &mdash; Mathematics in Lean v4.19.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=92fd9be5" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=7048e04d"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Sets and Functions" href="C04_Sets_and_Functions.html" />
    <link rel="prev" title="2. Basics" href="C02_Basics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. Basics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Logic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#universal-quantifier-and-intro">3.1. Universal Quantifier &#8704; and <code class="docutils literal notranslate"><span class="pre">intro</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#intro">3.1.1. <code class="docutils literal notranslate"><span class="pre">intro</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-monotone">3.1.2. Example: <code class="docutils literal notranslate"><span class="pre">Monotone</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-even-odd-functions">3.1.3. Example: Even/Odd Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-existential-quantifier">3.2. The Existential Quantifier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prove-existence-with-use">3.2.1. Prove Existence with <code class="docutils literal notranslate"><span class="pre">use</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-existential-statements-by-unpacking-information">3.2.2. Use Existential Statements by Unpacking Information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rcases-and-obtain">3.2.2.1. <code class="docutils literal notranslate"><span class="pre">rcases</span></code> and <code class="docutils literal notranslate"><span class="pre">obtain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rintro">3.2.2.2. <code class="docutils literal notranslate"><span class="pre">rintro</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#proving-statements-of-negation-counterexample-by-contra-push-neg-contrapose">3.3. Proving Statements of Negation: Counterexample, <code class="docutils literal notranslate"><span class="pre">by_contra</span></code>, <code class="docutils literal notranslate"><span class="pre">push_neg</span></code>, <code class="docutils literal notranslate"><span class="pre">contrapose</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#proving-and-using-conjunction">3.4. Proving and Using Conjunction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#disjunction">3.5. Disjunction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sequences-and-functional-equality">3.6. Sequences and Functional Equality</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ext">3.6.1. <code class="docutils literal notranslate"><span class="pre">ext</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#congr">3.6.2. <code class="docutils literal notranslate"><span class="pre">congr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#convert">3.6.3. <code class="docutils literal notranslate"><span class="pre">convert</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. Sets and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. Elementary Number Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="C06_Discrete_Mathematics.html">6. Discrete Mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Structures.html">7. Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Hierarchies.html">8. Hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Groups_and_Rings.html">9. Groups and Rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Linear_Algebra.html">10. Linear algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Topology.html">11. Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Differential_Calculus.html">12. Differential Calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="C13_Integration_and_Measure_Theory.html">13. Integration and Measure Theory</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">3. </span>Logic</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C03_Logic.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="logic">
<span id="id1"></span><h1><span class="section-number">3. </span>Logic<a class="headerlink" href="#logic" title="Link to this heading">&#61633;</a></h1>
<p>In the last chapter, we dealt with equations, inequalities,
and basic mathematical statements like
&#8220;<span class="math notranslate nohighlight">\(x\)</span> divides <span class="math notranslate nohighlight">\(y\)</span>.&#8221;
Complex mathematical statements are built up from
simple ones like these
using logical terms like &#8220;and,&#8221; &#8220;or,&#8221; &#8220;not,&#8221; and
&#8220;if &#8230; then,&#8221; &#8220;every,&#8221; and &#8220;some.&#8221;
In this chapter, we show you how to work with statements
that are built up in this way.</p>
<section id="universal-quantifier-and-intro">
<span id="implication-and-the-universal-quantifier"></span><h2><span class="section-number">3.1. </span>Universal Quantifier &#8704; and <code class="docutils literal notranslate"><span class="pre">intro</span></code><a class="headerlink" href="#universal-quantifier-and-intro" title="Link to this heading">&#61633;</a></h2>
<section id="intro">
<h3><span class="section-number">3.1.1. </span><code class="docutils literal notranslate"><span class="pre">intro</span></code><a class="headerlink" href="#intro" title="Link to this heading">&#61633;</a></h3>
<p id="index-0">To prove a statement with universal quantifier &#8704;, we need to use <code class="docutils literal notranslate"><span class="pre">intro</span></code> tactic.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">my_lemma4</span> <span class="o">:</span>
    <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">},</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="n">&#949;</span> <span class="bp">&#8804;</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="c1">-- useful theorems: ``abs_mul``, ``mul_le_mul``, ``abs_nonneg``, ``mul_lt_mul_right``, ``one_mul``</span>
  <span class="n">intro</span> <span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="n">epos</span> <span class="n">ele1</span> <span class="n">xlt</span> <span class="n">ylt</span>
  <span class="k">calc</span>
    <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">*</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="o">:=</span> <span class="gr">sorry</span>
    <span class="n">_</span> <span class="bp">&#8804;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">*</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="gr">sorry</span>
    <span class="n">_</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="gr">sorry</span>
    <span class="n">_</span> <span class="bp">=</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="gr">sorry</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">intro</span></code> give names to variables defined by the universal quantifiers and also unnamed hypotheses, so you can use them later in your proof.</p>
<ul>
<li><p>We can use any names we want; they do not have to be <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#949;</span></code>.</p></li>
<li><p>We have to introduce the variables (in the statement to be proved), even though they are marked implicit!</p></li>
<li><p>Making some variables implicit means we can omit them when <em>using</em> <code class="docutils literal notranslate"><span class="pre">my_lemma</span></code>. But they are still an essential part of the statement when we prove the lemma.</p></li>
</ul>
</li>
<li><p>Universal quantifiers may hide in definitions (in the statement to be proved). Lean will unfold definitions to expose them. <strong>It&#8217;s our job to check definitions and ``intro`` variables/hypotheses!</strong></p></li>
</ul>
<p>Example:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">FnUb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span>

<span class="kd">def</span> <span class="n">FnLb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</div>
<div class="highlight-lean notranslate" id="index-1"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">hfa</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="c1">-- lambda abstraction</span>
  <span class="n">intro</span> <span class="n">x</span>  <span class="c1">-- no need to apply ``intro`` to the FnUb in ``hfa`` and ``hgb`` since they are already proven.</span>
  <span class="n">dsimp</span>  <span class="c1">-- simplification. (The &#8220;d&#8221; stands for &#8220;definitional.&#8221;)</span>
  <span class="n">apply</span> <span class="n">add_le_add</span>
  <span class="n">apply</span> <span class="n">hfa</span>
  <span class="n">apply</span> <span class="n">hgb</span>
</pre></div>
</div>
</section>
<section id="example-monotone">
<span id="index-2"></span><h3><span class="section-number">3.1.2. </span>Example: <code class="docutils literal notranslate"><span class="pre">Monotone</span></code><a class="headerlink" href="#example-monotone" title="Link to this heading">&#61633;</a></h3>
<p id="index-3">For another example of a hidden universal quantifier,
Mathlib defines a predicate <code class="docutils literal notranslate"><span class="pre">Monotone</span></code>,
which says that a function is nondecreasing in its arguments:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">mf</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">mg</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">a</span> <span class="n">b</span> <span class="n">aleb</span>
  <span class="n">apply</span> <span class="n">add_le_add</span>
  <span class="n">apply</span> <span class="n">mf</span> <span class="n">aleb</span>
  <span class="n">apply</span> <span class="n">mg</span> <span class="n">aleb</span>
</pre></div>
</div>
<p>Try proving these, with either tactics or proof terms:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">mf</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">nnc</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">mf</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">mg</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="example-even-odd-functions">
<h3><span class="section-number">3.1.3. </span>Example: Even/Odd Functions<a class="headerlink" href="#example-even-odd-functions" title="Link to this heading">&#61633;</a></h3>
<p>A function <span class="math notranslate nohighlight">\(f\)</span> from <span class="math notranslate nohighlight">\(\Bbb R\)</span> to
<span class="math notranslate nohighlight">\(\Bbb R\)</span> is said to be <em>even</em> if
<span class="math notranslate nohighlight">\(f(-x) = f(x)\)</span> for every <span class="math notranslate nohighlight">\(x\)</span>,
and <em>odd</em> if <span class="math notranslate nohighlight">\(f(-x) = -f(x)\)</span> for every <span class="math notranslate nohighlight">\(x\)</span>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">FnEven</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">FnOdd</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ef</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">eg</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span>
    <span class="n">_</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="n">g</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">ef</span><span class="o">,</span> <span class="n">eg</span><span class="o">]</span>


<span class="kd">example</span> <span class="o">(</span><span class="n">of</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">og</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ef</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">og</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ef</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">og</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
</section>
<section id="the-existential-quantifier">
<span id="id2"></span><h2><span class="section-number">3.2. </span>The Existential Quantifier<a class="headerlink" href="#the-existential-quantifier" title="Link to this heading">&#61633;</a></h2>
<p>The existential quantifier, which can be entered as <code class="docutils literal notranslate"><span class="pre">\ex</span></code> in VS Code,
is used to represent the phrase &#8220;there exists.&#8221;
The formal expression <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#8477;,</span> <span class="pre">2</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">&#8743;</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">3</span></code> in Lean says
that there is a real number between 2 and 3.
(We will discuss the conjunction symbol, <code class="docutils literal notranslate"><span class="pre">&#8743;</span></code>, in <a class="reference internal" href="#conjunction-and-biimplication"><span class="std std-numref">Section 3.4</span></a>.)
The canonical way to prove such a statement is to exhibit a real number
and show that it has the stated property.
The number 2.5, which we can enter as <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">/</span> <span class="pre">2</span></code>
or <code class="docutils literal notranslate"><span class="pre">(5</span> <span class="pre">:</span> <span class="pre">&#8477;)</span> <span class="pre">/</span> <span class="pre">2</span></code> when Lean cannot infer from context that we have
the real numbers in mind, has the required property,
and the <code class="docutils literal notranslate"><span class="pre">norm_num</span></code> tactic can prove that it meets the description.</p>
<section id="prove-existence-with-use">
<h3><span class="section-number">3.2.1. </span>Prove Existence with <code class="docutils literal notranslate"><span class="pre">use</span></code><a class="headerlink" href="#prove-existence-with-use" title="Link to this heading">&#61633;</a></h3>
<ul class="simple" id="index-4">
<li><p><code class="docutils literal notranslate"><span class="pre">use</span></code> tactic provides the object to satisfy an existential quantifier, leaving the goal of proving the property.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span>
  <span class="n">norm_num</span>
</pre></div>
</div>
<p>You can give the <code class="docutils literal notranslate"><span class="pre">use</span></code> tactic proofs as well as data:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span>
</pre></div>
</div>
<p>In fact, the <code class="docutils literal notranslate"><span class="pre">use</span></code> tactic automatically tries to use available assumptions as well.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&#8743;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="use-existential-statements-by-unpacking-information">
<h3><span class="section-number">3.2.2. </span>Use Existential Statements by Unpacking Information<a class="headerlink" href="#use-existential-statements-by-unpacking-information" title="Link to this heading">&#61633;</a></h3>
<p>Unpacking information in a hypothesis is very important.
Lean and Mathlib provide a number of ways to do it.</p>
<section id="rcases-and-obtain">
<h4><span class="section-number">3.2.2.1. </span><code class="docutils literal notranslate"><span class="pre">rcases</span></code> and <code class="docutils literal notranslate"><span class="pre">obtain</span></code><a class="headerlink" href="#rcases-and-obtain" title="Link to this heading">&#61633;</a></h4>
<p>Given the following statements:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">FnUb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span>

<span class="kd">def</span> <span class="n">FnLb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="n">x</span>

<span class="kd">def</span> <span class="n">FnHasUb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8707;</span> <span class="n">a</span><span class="o">,</span> <span class="n">FnUb</span> <span class="n">f</span> <span class="n">a</span>

<span class="kd">def</span> <span class="n">FnHasLb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8707;</span> <span class="n">a</span><span class="o">,</span> <span class="n">FnLb</span> <span class="n">f</span> <span class="n">a</span>

<span class="kd">theorem</span> <span class="n">fnUb_add</span> <span class="o">{</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">hfa</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">FnUb</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">add_le_add</span> <span class="o">(</span><span class="n">hfa</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
<p>We can prove:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">ubg</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">ubf</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;</span>  <span class="c1">-- ``obtain &#10216;a, ubfa&#10217; := ubf`` also works</span>
  <span class="n">rcases</span> <span class="n">ubg</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span>  <span class="c1">-- ``obtain &#10216;b, ubgb&#10217; := ubg`` also works</span>
  <span class="n">use</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span>
  <span class="n">apply</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span>
</pre></div>
</div>
<ul class="simple" id="index-5">
<li><p><code class="docutils literal notranslate"><span class="pre">rcases</span></code> / <code class="docutils literal notranslate"><span class="pre">obtain</span></code> unpacks the information in the existential quantifier. It destructure hypotheses or expressions.</p>
<ul>
<li><p>They introduces new variables (e.g. <code class="docutils literal notranslate"><span class="pre">a</span></code>) and/or hypotheses (e.g. <code class="docutils literal notranslate"><span class="pre">ubfa</span></code>) into the current proof state context, so we can use them later.</p></li>
<li><p>The proof goal is unchanged.</p></li>
</ul>
</li>
<li><p>Annotation <code class="docutils literal notranslate"><span class="pre">&#10216;a,</span> <span class="pre">ubfa&#10217;</span></code> is the <em>pattern</em> that describes the information that we expect to find when we unpack the main argument.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">lbf</span> <span class="o">:</span> <span class="n">FnHasLb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">lbg</span> <span class="o">:</span> <span class="n">FnHasLb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasLb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&#8805;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ul class="simple">
<li><p>(Similar to Universal quantifiers) Existential quantifiers may also hide in definitions (in the statement to be proved). <strong>It&#8217;s our job to be aware of them in definitions and unpace variables/hypotheses!</strong></p></li>
</ul>
<p>For example, divisibility is implicitly an &#8220;exists&#8221; statement.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">divab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">divbc</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&#8739;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">divab</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">d</span><span class="o">,</span> <span class="n">beq</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">divbc</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">e</span><span class="o">,</span> <span class="n">ceq</span><span class="o">&#10217;</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">ceq</span><span class="o">,</span> <span class="n">beq</span><span class="o">]</span>
  <span class="n">use</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">e</span><span class="bp">;</span> <span class="n">ring</span>


<span class="kd">example</span> <span class="o">(</span><span class="n">divab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">divbc</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&#8739;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="c1">-- ``rfl`` in place of a new identifier, rcases does the rewriting automatically</span>
  <span class="n">rcases</span> <span class="n">divab</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">d</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">divbc</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">e</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">e</span><span class="bp">;</span> <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="rintro">
<h4><span class="section-number">3.2.2.2. </span><code class="docutils literal notranslate"><span class="pre">rintro</span></code><a class="headerlink" href="#rintro" title="Link to this heading">&#61633;</a></h4>
<p id="index-6">The <code class="docutils literal notranslate"><span class="pre">rintro</span></code> tactic is a combination of <code class="docutils literal notranslate"><span class="pre">intro</span></code> and <code class="docutils literal notranslate"><span class="pre">rcases</span></code>:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span> <span class="bp">&#8594;</span> <span class="n">FnHasUb</span> <span class="n">g</span> <span class="bp">&#8594;</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="c1">-- we need intro because hypotheses ``FnHasUb f`` and ``FnHasUb g`` are unnamed</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span>  <span class="c1">-- intro and immediately unpack</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>
</pre></div>
</div>
<div class="highlight-lean notranslate" id="index-7"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">y</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">/</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">field_simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>  <span class="c1">-- clear denominators</span>
  <span class="n">ring</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="proving-statements-of-negation-counterexample-by-contra-push-neg-contrapose">
<span id="negation"></span><h2><span class="section-number">3.3. </span>Proving Statements of Negation: Counterexample, <code class="docutils literal notranslate"><span class="pre">by_contra</span></code>, <code class="docutils literal notranslate"><span class="pre">push_neg</span></code>, <code class="docutils literal notranslate"><span class="pre">contrapose</span></code><a class="headerlink" href="#proving-statements-of-negation-counterexample-by-contra-push-neg-contrapose" title="Link to this heading">&#61633;</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">A</span></code> abbreviates <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8594;</span> <span class="pre">False</span></code>, i.e., there are contradictions in the proof state context.</p></li>
<li><p>We prove <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">A</span></code> by <strong>introducing a hypothesis</strong> <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">A</span></code> via <code class="docutils literal notranslate"><span class="pre">intro</span></code>, and then <strong>proving</strong> <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p>&#172; has a low precedence:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></code>: <code class="docutils literal notranslate"><span class="pre">x</span></code> is not less than <code class="docutils literal notranslate"><span class="pre">y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">&#8707;</span> <span class="pre">z,</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">z</span> <span class="pre">&#8743;</span> <span class="pre">z</span> <span class="pre">&lt;</span> <span class="pre">y</span></code>: there does not exist a <code class="docutils literal notranslate"><span class="pre">z</span></code> strictly between <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p></li>
</ul>
</li>
</ul>
<p>Examples:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">b</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h&#39;</span>  <span class="c1">-- name ``b &#8594; a``</span>
  <span class="c1">-- Lean does not care if statements are indeed true or false. Lean only proves by local context.</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">lt_trans</span> <span class="n">h</span> <span class="n">h&#39;</span>
  <span class="n">apply</span> <span class="n">lt_irrefl</span> <span class="n">a</span> <span class="n">this</span>
</pre></div>
</div>
<ul class="simple" id="index-8">
<li><p><code class="docutils literal notranslate"><span class="pre">linarith</span></code> scans the local context for linear (in)equality. <strong>When it detects that the system is inconsistent it produces a proof of False.</strong></p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">fnub</span>
  <span class="n">rcases</span> <span class="n">fnub</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">fnuba</span><span class="o">&#10217;</span>
  <span class="c1">-- rintro &#10216;a, fnuba&#10217;</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="n">a</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">fnuba</span> <span class="n">x</span>
  <span class="n">linarith</span>  <span class="c1">-- linarith can prove either true or false</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasLb</span> <span class="n">f</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>Mathlib offers a number of useful theorems for relating orders
and negations:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="o">(</span><span class="n">not_le_of_gt</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&gt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">not_lt_of_ge</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8805;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_of_not_ge</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&#8805;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_of_not_gt</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&gt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>We can prove the negation of a universally quantified statement by giving a <strong>counterexample</strong>.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">},</span> <span class="n">Monotone</span> <span class="n">f</span> <span class="bp">&#8594;</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h</span>
  <span class="c1">-- we will now create a counterexample</span>
  <span class="k">let</span> <span class="n">f</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8614;</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span>  <span class="c1">-- adds a *local definition* to the context</span>
  <span class="k">have</span> <span class="n">monof</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
  <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">le_refl</span> <span class="n">_</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">by_contra</span></code> allows us to prove a goal <code class="docutils literal notranslate"><span class="pre">Q</span></code> by assuming <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">Q</span></code> and deriving a contradiction.</p></li>
</ul>
<div class="highlight-lean notranslate" id="index-9"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span><span class="n">P</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_contra</span> <span class="n">h&#39;</span>
  <span class="n">apply</span> <span class="n">h</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="k">show</span> <span class="n">P</span> <span class="n">x</span>
  <span class="n">by_contra</span> <span class="n">h&#39;&#39;</span>
  <span class="n">exact</span> <span class="n">h&#39;</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">h&#39;&#39;</span><span class="o">&#10217;</span>
</pre></div>
</div>
<ul class="simple" id="index-10">
<li><p><code class="docutils literal notranslate"><span class="pre">push_neg</span></code> can replace statements of negation with equivalent forms in which the negation has been pushed inward.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">push_neg</span> <span class="pre">at</span> <span class="pre">h</span></code> restates the hypothesis <code class="docutils literal notranslate"><span class="pre">h</span></code>.</p></li>
</ul>
</li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">exact</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">FnHasUb</span><span class="o">,</span> <span class="n">FnUb</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span>  <span class="c1">-- expand the definitions of ``FnHasUb`` and ``FnUb``</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">exact</span> <span class="n">h</span>
</pre></div>
</div>
<ul class="simple" id="index-11">
<li><p><code class="docutils literal notranslate"><span class="pre">contrapose</span></code> transforms a goal <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8594;</span> <span class="pre">B</span></code> to <code class="docutils literal notranslate"><span class="pre">&#172;B</span> <span class="pre">&#8594;</span> <span class="pre">&#172;A</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contrapose!</span></code> runs <code class="docutils literal notranslate"><span class="pre">contrapose</span></code> and then pushes negations inside both A and B.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h</span>
  <span class="n">exact</span> <span class="n">h</span>
</pre></div>
</div>
</section>
<section id="proving-and-using-conjunction">
<span id="conjunction-and-biimplication"></span><h2><span class="section-number">3.4. </span>Proving and Using Conjunction<a class="headerlink" href="#proving-and-using-conjunction" title="Link to this heading">&#61633;</a></h2>
<span id="index-12"></span><ul class="simple" id="index-13">
<li><p><code class="docutils literal notranslate"><span class="pre">constructor</span></code> allows you to <em>prove</em> <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8743;</span> <span class="pre">B</span></code> by first proving <code class="docutils literal notranslate"><span class="pre">A</span></code> and then proving <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">constructor</span>
  <span class="bp">&#183;</span> <span class="n">assumption</span>  <span class="c1">-- tells Lean to find an assumption/hypothesis that will solve the goal</span>
  <span class="n">intro</span> <span class="n">h</span>
  <span class="n">apply</span> <span class="n">h&#8321;</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>Using</em> a statement of conjunctions requires unpacking parts, with <code class="docutils literal notranslate"><span class="pre">rcases</span></code> or <code class="docutils literal notranslate"><span class="pre">rintro</span></code>.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h&#8321;</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span> <span class="n">h&#39;</span>
  <span class="n">exact</span> <span class="n">h&#8321;</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>You can also unpack a hypothesis <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">A</span> <span class="pre">&#8743;</span> <span class="pre">B</span></code> using <code class="docutils literal notranslate"><span class="pre">h.left</span></code> and <code class="docutils literal notranslate"><span class="pre">h.right</span></code>, or, equivalently, <code class="docutils literal notranslate"><span class="pre">h.1</span></code> and <code class="docutils literal notranslate"><span class="pre">h.2</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h&#39;</span>
  <span class="n">apply</span> <span class="n">h.right</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h.left</span> <span class="n">h&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To <em>use</em> a statement of both <code class="docutils literal notranslate"><span class="pre">&#8707;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8743;</span></code>, you can unpact together.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="bp">&#8743;</span> <span class="n">z</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">z</span><span class="o">,</span> <span class="n">xltz</span><span class="o">,</span> <span class="n">zlty</span><span class="o">&#10217;</span>
  <span class="n">exact</span> <span class="n">lt_trans</span> <span class="n">xltz</span> <span class="n">zlty</span>
  <span class="c1">-- apply lt_trans</span>
  <span class="c1">-- &#183; exact xltz</span>
  <span class="c1">-- exact zlty</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To <em>prove</em> a statement of both <code class="docutils literal notranslate"><span class="pre">&#8707;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8743;</span></code>, you can use the <code class="docutils literal notranslate"><span class="pre">use</span></code> tactic:</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">4</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span>
  <span class="n">constructor</span> <span class="bp">&lt;;&gt;</span> <span class="n">norm_num</span>  <span class="c1">-- &lt;;&gt; is a tactic-combinator: pipes every goal produced by the left tactic into the right tactic</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="mi">4</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">&#8743;</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">10</span> <span class="bp">&#8743;</span> <span class="n">Nat.Prime</span> <span class="n">m</span> <span class="bp">&#8743;</span> <span class="n">Nat.Prime</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">use</span> <span class="mi">5</span>  <span class="c1">-- m</span>
  <span class="n">use</span> <span class="mi">7</span>  <span class="c1">-- n</span>
  <span class="n">norm_num</span>
</pre></div>
</div>
<p>The bi-implication <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8596;</span> <span class="pre">B</span></code> can be considered as <code class="docutils literal notranslate"><span class="pre">(A</span> <span class="pre">&#8594;</span> <span class="pre">B)</span> <span class="pre">&#8743;</span> <span class="pre">(B</span> <span class="pre">&#8594;</span> <span class="pre">A)</span></code>, so you cal use <code class="docutils literal notranslate"><span class="pre">constructor</span></code> to unpack.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">constructor</span>
  <span class="bp">&#183;</span> <span class="n">contrapose</span><span class="bp">!</span>  <span class="c1">-- &#172;y &#8804; x &#8594; x &#8800; y</span>
    <span class="n">rintro</span> <span class="n">rfl</span>
    <span class="n">rfl</span>
  <span class="n">contrapose</span><span class="bp">!</span>  <span class="c1">-- x &#8800; y &#8594; &#172;y &#8804; x</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h</span>
</pre></div>
</div>
</section>
<section id="disjunction">
<span id="id3"></span><h2><span class="section-number">3.5. </span>Disjunction<a class="headerlink" href="#disjunction" title="Link to this heading">&#61633;</a></h2>
<ul class="simple" id="index-14">
<li><p>To prove a disjunction <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8744;</span> <span class="pre">B</span></code> is to prove <code class="docutils literal notranslate"><span class="pre">A</span></code> or to prove <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">left</span></code> tactic chooses <code class="docutils literal notranslate"><span class="pre">A</span></code>, and the <code class="docutils literal notranslate"><span class="pre">right</span></code> tactic chooses <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p></li>
</ul>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">left</span>
  <span class="n">linarith</span> <span class="o">[</span><span class="n">pow_two_nonneg</span> <span class="n">x</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">-</span><span class="n">y</span> <span class="bp">&gt;</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">right</span>
  <span class="n">linarith</span> <span class="o">[</span><span class="n">pow_two_nonneg</span> <span class="n">x</span><span class="o">]</span>
</pre></div>
</div>
<p>To <em>use</em> a hypothesis of the form <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8744;</span> <span class="pre">B</span></code>, we need <code class="docutils literal notranslate"><span class="pre">rcases</span></code> and also need to <strong>consider both cases</strong>.
Here is the syntax:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="n">rcases</span> <span class="o">&#10216;</span><span class="n">p</span> <span class="bp">&#8744;</span> <span class="n">q</span><span class="o">&#10217;</span> <span class="o">[</span><span class="n">args</span><span class="o">]</span> <span class="k">with</span> <span class="n">hp</span> <span class="bp">|</span> <span class="n">hq</span>
  <span class="c1">-- two goals are now open:</span>
  <span class="bp">&#183;</span> <span class="n">goal</span><span class="o">,</span> <span class="n">assuming</span> <span class="n">hp</span> <span class="o">:</span> <span class="n">p</span>
  <span class="bp">&#183;</span> <span class="n">goal</span><span class="o">,</span> <span class="n">assuming</span> <span class="n">hq</span> <span class="o">:</span> <span class="n">q</span>
</pre></div>
</div>
<p>In the next example, we tell Lean
to use the name <code class="docutils literal notranslate"><span class="pre">h</span></code> on each branch.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="c1">-- le_or_gt: a &#8804; b &#8744; b &lt; a</span>
  <span class="c1">-- both the hypothesis and the goal has disjunction</span>
  <span class="n">rcases</span> <span class="n">le_or_gt</span> <span class="mi">0</span> <span class="n">y</span> <span class="k">with</span> <span class="n">h</span> <span class="bp">|</span> <span class="n">h</span>  <span class="c1">-- ``h`` in local context, name reused; we use | instead of &#10216;, &#10217;</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_nonneg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">left</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_neg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">rcases</span></code> and <code class="docutils literal notranslate"><span class="pre">rintro</span></code> with nested disjunctions.
When these result in a genuine case split with multiple goals,
the patterns for each new goal are separated by a vertical bar.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">lt_trichotomy</span> <span class="n">x</span> <span class="mi">0</span> <span class="k">with</span> <span class="n">xlt</span> <span class="bp">|</span> <span class="n">xeq</span> <span class="bp">|</span> <span class="n">xgt</span>
  <span class="bp">&#183;</span> <span class="n">left</span>
    <span class="n">exact</span> <span class="n">xlt</span>
  <span class="bp">&#183;</span> <span class="n">contradiction</span>
  <span class="bp">&#183;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">xgt</span>
</pre></div>
</div>
</section>
<section id="sequences-and-functional-equality">
<span id="sequences-and-convergence"></span><h2><span class="section-number">3.6. </span>Sequences and Functional Equality<a class="headerlink" href="#sequences-and-functional-equality" title="Link to this heading">&#61633;</a></h2>
<p>In Lean, we can represent a sequence <span class="math notranslate nohighlight">\(s_0, s_1, s_2, \ldots\)</span> of real numbers as a function <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">ConvergesTo</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">&#949;</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">N</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">N</span><span class="o">,</span> <span class="bp">|</span><span class="n">s</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span>
</pre></div>
</div>
<section id="ext">
<h3><span class="section-number">3.6.1. </span><code class="docutils literal notranslate"><span class="pre">ext</span></code><a class="headerlink" href="#ext" title="Link to this heading">&#61633;</a></h3>
<p id="index-15"><code class="docutils literal notranslate"><span class="pre">ext</span></code> (function extensionality) enables us to prove an equation between functions by proving that their values are the same at all the values of their arguments: <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">(x</span> <span class="pre">:</span> <span class="pre">Type),</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">g</span> <span class="pre">x</span> <span class="pre">&#8594;</span> <span class="pre">f</span> <span class="pre">=</span> <span class="pre">g</span></code></p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8614;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="k">fun</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8614;</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">ext</span>  <span class="c1">-- introduces fresh variables for arguments of functions.</span>
  <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="congr">
<h3><span class="section-number">3.6.2. </span><code class="docutils literal notranslate"><span class="pre">congr</span></code><a class="headerlink" href="#congr" title="Link to this heading">&#61633;</a></h3>
<p id="index-16"><code class="docutils literal notranslate"><span class="pre">congr</span></code> allows us to prove the equation by reconciling the parts that are different:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">|</span><span class="n">a</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">|</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">congr</span>  <span class="c1">-- peels off the ``abs`` on each side</span>
  <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="convert">
<h3><span class="section-number">3.6.3. </span><code class="docutils literal notranslate"><span class="pre">convert</span></code><a class="headerlink" href="#convert" title="Link to this heading">&#61633;</a></h3>
<p id="index-17"><code class="docutils literal notranslate"><span class="pre">convert</span></code> applies a theorem to a goal when the conclusion of the theorem doesn&#8217;t fully match.</p>
<p>For example, suppose we want to prove <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">a</span></code> from <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;</span> <span class="pre">a</span></code>.
A theorem in the library, <code class="docutils literal notranslate"><span class="pre">mul_lt_mul_right</span></code>,
will let us prove <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">*</span> <span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">a</span></code>.
Instead, the <code class="docutils literal notranslate"><span class="pre">convert</span></code> tactic lets us apply the theorem
as it is,
and leaves us with the task of proving the equations that
are needed to make the goal match.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="c1">-- In mul_lt_mul_right, (a0 : 0 &lt; a) : b &lt; c &#8596; b * a &lt; c * a</span>
  <span class="c1">-- &quot;h : 1 &lt; a&quot; vs. &quot;b &lt; c&quot; =&gt; &quot;assign&quot; 1 to b and a to c =&gt; 1 * a &lt; a * a</span>
  <span class="c1">-- but our goal is a &lt; a * a! =&gt; the minimal change is to rewrite a to 1 * a</span>
  <span class="n">convert</span> <span class="o">(</span><span class="n">mul_lt_mul_right</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="n">h</span>
  <span class="c1">-- what are mismatched goals left? 1) a = 1 * a; 2) 0 &lt; a (what was left in _)</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>
  <span class="n">exact</span> <span class="n">lt_trans</span> <span class="n">zero_lt_one</span> <span class="n">h</span>
</pre></div>
</div>
<p>This example illustrates another useful trick: when we apply an
expression with an underscore
and Lean can&#8217;t fill it in for us automatically,
it simply leaves it for us as another goal.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C02_Basics.html" class="btn btn-neutral float-left" title="2. Basics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C04_Sets_and_Functions.html" class="btn btn-neutral float-right" title="4. Sets and Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2025, Jeremy Avigad, Patrick Massot. Modified, simplified, annotated by Wuyang Chen. Text licensed under CC BY 4.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>